!function(s){var i={};function n(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=s,n.c=i,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=278)}({0:function(t,e){t.exports=Vue},1:function(t,e,s){"use strict";function i(t,e,s,i,n,o,a,r){var c,p="function"==typeof t?t.options:t;if(e&&(p.render=e,p.staticRenderFns=s,p._compiled=!0),i&&(p.functional=!0),o&&(p._scopeId="data-v-"+o),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},p._ssrRegister=c):n&&(c=r?function(){n.call(this,this.$root.$options.shadowRoot)}:n),c)if(p.functional){p._injectStyles=c;var u=p.render;p.render=function(t,e){return c.call(e),u(t,e)}}else{var l=p.beforeCreate;p.beforeCreate=l?[].concat(l,c):[c]}return{exports:t,options:p}}s.d(e,"a",function(){return i})},104:function(t,e,s){t.exports=s.p+"img/noaddress.png"},11:function(t,e){t.exports=function(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}},115:function(t,e,s){t.exports=s.p+"img/round_shop.png"},116:function(t,e,s){t.exports=s.p+"img/shouwan.png"},12:function(t,e,i){"use strict";function s(){var t=this,e=t.$createElement,s=t._self._c||e;return"403"!=t.statusCode&&"1"!=t.statusCode?s("div",{staticClass:"err"},[s("img",{staticClass:"img",attrs:{src:i(20),alt:""}}),t._v(" "),503==t.statusCode?s("p",[t._v("当前访问峰值过高，请稍候再试...")]):s("p",[t._v("网络出现了错误，请稍候再试...")]),t._v(" "),s("span",{staticClass:"chongshi",on:{click:t.reload}},[t._v("点击重试")])]):t._e()}s._withStripped=!0;var n={components:{},props:{showErr:{type:String,required:!1},scode:{type:String,required:!1}},data:function(){return{statusCode:"1"}},watch:{scode:function(t){0<=t&&(this.statusCode=t)}},computed:{},created:function(){},mounted:function(){},methods:{reload:function(){this.$emit("reload")}}},o=(i(21),i(1)),a=Object(o.a)(n,s,[],!1,null,"310113f7",null);a.options.__file="src/components/statuserr/statuserr.vue";e.a=a.exports},20:function(t,e,s){t.exports=s.p+"img/statuserr.png"},21:function(t,e,s){"use strict";var i=s(7);s.n(i).a},221:function(t,e,s){"use strict";var i=s(92);s.n(i).a},23:function(t,e,s){},25:function(t,e,s){t.exports=s.p+"img/couponNoData1.png"},278:function(t,e,a){"use strict";a.r(e);function s(){var n=this,t=n.$createElement,o=n._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:n.dataover,expression:"dataover"}],style:0==n.cardata.length&&0==n.vipcardata.length?"":"margin-bottom:50px",attrs:{id:"app2"}},[o("div",{staticClass:"catoubu",style:n.statustop?"height:"+n.sheight+"px;padding-top:"+n.statustop+"px":""},[n._v("购物车")]),n._v(" "),o("div",{staticClass:"toubai",style:n.statustop?"height:"+n.sheight+"px":""}),n._v(" "),0<n.cardata.length?o("section",{staticStyle:{background:"#fff"}},[o("div",{staticClass:"blockone"},[o("div",{staticClass:"select",style:n.zongcarselect[0]?"":"border:1px solid #D8D8D8",on:{click:function(t){return n.allcardata(0,0)}}},[o("img",{directives:[{name:"show",rawName:"v-show",value:n.zongcarselect[0],expression:"zongcarselect[0]"}],attrs:{src:a(43),alt:""}})]),n._v(" "),o("p",[n._v("普通购物")])]),n._v(" "),n._l(n.cardata,function(e,i){return o("div",{key:i,staticClass:"prolist"},[o("div",{staticClass:"shopnamebox"},[o("div",{staticClass:"items"},[o("div",{staticClass:"select",style:n.ptshopSelect[i]?"":"border:1px solid #D8D8D8",on:{click:function(t){return n.ShopAllSelect(i,0)}}},[o("img",{directives:[{name:"show",rawName:"v-show",value:n.ptshopSelect[i],expression:"ptshopSelect[index]"}],attrs:{src:a(43),alt:""}})]),n._v(" "),o("div",{staticClass:"s_namebox"},[o("img",{attrs:{src:a(115),alt:""}}),n._v(" "),o("p",[n._v(n._s(e[0].shopname))])])]),n._v(" "),e[0].iscoupon?o("p",{staticClass:"useimg",on:{click:function(t){return n.gocouopn(e[0].shopid)}}},[n._v("优惠劵")]):n._e()]),n._v(" "),n._l(e,function(e,s){return o("div",{key:e.shopid,staticStyle:{position:"relative"}},[o("div",{staticClass:"pro-main",style:n.putongselctin[i][s].delelshow?"transform:translateX(-80px)":""},[o("div",{staticClass:"select",style:n._f("onselect")(n.putongselctin[i][s].onselect),on:{click:function(t){return n.changselect(i,s,n.putongselctin[i][s].onselect,0)}}},[o("img",{directives:[{name:"show",rawName:"v-show",value:1==n.putongselctin[i][s].onselect,expression:"putongselctin[index][idx].onselect==1"}],attrs:{src:a(43),alt:""}})]),n._v(" "),o("div",{staticStyle:{position:"relative"}},[o("img",{staticClass:"pro_img",attrs:{src:e.pic,alt:""},on:{click:function(t){return n.gopro(e.proid)}}}),n._v(" "),0==e.stocks?o("img",{staticClass:"shouwan",attrs:{src:a(116),alt:""}}):n._e()]),n._v(" "),o("div",{staticClass:"pro-xiangqing",on:{touchstart:n.touchstartF,touchend:function(t){return n.touchmoveF(t,i,s,0)}}},[o("div",{staticClass:"pro-title",on:{click:function(t){return n.gopro(e.proid)}}},[o("p",[e.iscross?o("span",{staticClass:"allquer"},[n._v("全球购")]):n._e(),n._v(" "),e.isrushbuy?o("span",{staticClass:"xianshi"},[n._v("限时抢购")]):n._e(),n._v("\n                "+n._s(e.productname)+"\n              ")])]),n._v(" "),o("div",{staticClass:"pro-sku"},[n._v(n._s(e.skutext))]),n._v(" "),o("div",{staticClass:"pro-jiage"},[o("p",{staticClass:"p12"},[n._v("¥"+n._s(n._f("toFixed")(e.price)))]),n._v(" "),o("div",{staticClass:"numbox"},[o("i",{staticClass:"iconfont icon-subtract_icon",style:n._f("minbuyshow")(e.minbuy,n.putongselctin[i][s].qty),on:{click:function(t){return n.changenum(!1,e.minbuy,n.putongselctin[i][s].qty,e.id,i,s,0)}}}),n._v(" "),o("span",{staticClass:"num",on:{click:function(t){return n.ChangeCount(e.minbuy,e.maxbuy,n.putongselctin[i][s].qty,e.id,i,s,0)}}},[n._v(n._s(n.putongselctin[i][s].qty))]),n._v(" "),o("i",{staticClass:"iconfont icon-plus_icon",on:{click:function(t){return n.changenum(!0,e.maxbuy,n.putongselctin[i][s].qty,e.id,i,s,0)}}})])])])]),n._v(" "),o("div",{staticClass:"pro-delel",style:n.putongselctin[i][s].delelshow?"z-index:0":"",on:{click:function(t){return n.delpro(e.id)}}},[n._v("删除")])])})],2)})],2):n._e(),n._v(" "),0<n.vipcardata.length?o("section",[o("div",{staticClass:"blockone"},[o("div",{staticClass:"select",style:n.zongcarselect[1]?"":"border:1px solid #D8D8D8",on:{click:function(t){return n.allcardata(1,1)}}},[o("img",{directives:[{name:"show",rawName:"v-show",value:n.zongcarselect[1],expression:"zongcarselect[1]"}],attrs:{src:a(43),alt:""}})]),n._v(" "),o("p",[n._v("高佣专区")])]),n._v(" "),n._l(n.vipcardata,function(e,i){return o("div",{key:i,staticClass:"prolist"},[o("div",{staticClass:"shopnamebox"},[o("div",{staticClass:"items"},[o("div",{staticClass:"select",style:n.vipshopSelect[i]?"":"border:1px solid #D8D8D8",on:{click:function(t){return n.ShopAllSelect(i,1)}}},[o("img",{directives:[{name:"show",rawName:"v-show",value:n.vipshopSelect[i],expression:"vipshopSelect[index]"}],attrs:{src:a(43),alt:""}})]),n._v(" "),o("div",{staticClass:"s_namebox"},[o("img",{attrs:{src:a(115),alt:""}}),n._v(" "),o("p",[n._v(n._s(e[0].shopname))])])]),n._v(" "),e[0].iscoupon?o("p",{staticClass:"useimg",on:{click:function(t){return n.gocouopn(e[0].shopid)}}},[n._v("优惠劵")]):n._e()]),n._v(" "),n._l(e,function(e,s){return o("div",{key:e.shopid,staticStyle:{position:"relative"}},[o("div",{staticClass:"pro-main",style:n.vipselctin[i][s].delelshow?"transform:translateX(-80px)":""},[o("div",{staticClass:"select",style:n._f("onselect")(n.vipselctin[i][s].onselect),on:{click:function(t){return n.changselect(i,s,n.vipselctin[i][s].onselect,1)}}},[o("img",{directives:[{name:"show",rawName:"v-show",value:1==n.vipselctin[i][s].onselect,expression:"vipselctin[index][idx].onselect==1"}],attrs:{src:a(43),alt:""}})]),n._v(" "),o("div",{staticStyle:{position:"relative"}},[o("img",{staticClass:"pro_img",attrs:{src:e.pic,alt:""},on:{click:function(t){return n.gopro(e.proid)}}}),n._v(" "),0==e.stocks?o("img",{staticClass:"shouwan",attrs:{src:a(116),alt:""}}):n._e()]),n._v(" "),o("div",{staticClass:"pro-xiangqing",on:{touchstart:n.touchstartF,touchend:function(t){return n.touchmoveF(t,i,s,1)}}},[o("div",{staticClass:"pro-title",on:{click:function(t){return n.gopro(e.proid)}}},[o("p",[e.iscross?o("span",{staticClass:"allquer"},[n._v("全球购")]):n._e(),n._v(" "),e.isrushbuy?o("span",{staticClass:"xianshi"},[n._v("限时抢购")]):n._e(),n._v("\n                "+n._s(e.productname)+"\n              ")])]),n._v(" "),o("div",{staticClass:"pro-sku"},[n._v(n._s(e.skutext))]),n._v(" "),o("div",{staticClass:"pro-jiage"},[o("p",{staticClass:"p12"},[n._v("¥"+n._s(n._f("toFixed")(e.price)))]),n._v(" "),o("div",{staticClass:"numbox"},[o("i",{staticClass:"iconfont icon-subtract_icon",style:n._f("minbuyshow")(e.minbuy,n.vipselctin[i][s].qty),on:{click:function(t){return n.changenum(!1,e.minbuy,n.vipselctin[i][s].qty,e.id,i,s,1)}}}),n._v(" "),o("span",{staticClass:"num",on:{click:function(t){return n.ChangeCount(e.minbuy,e.maxbuy,n.vipselctin[i][s].qty,e.id,i,s,1)}}},[n._v(n._s(n.vipselctin[i][s].qty))]),n._v(" "),o("i",{staticClass:"iconfont icon-plus_icon",on:{click:function(t){return n.changenum(!0,e.maxbuy,n.vipselctin[i][s].qty,e.id,i,s,1)}}})])])])]),n._v(" "),o("div",{staticClass:"pro-delel",style:n.vipselctin[i][s].delelshow?"z-index:0":"",on:{click:function(t){return n.delpro(e.id)}}},[n._v("删除")])])})],2)})],2):n._e(),n._v(" "),0==n.cardata.length&&0==n.vipcardata.length?o("section",[n._m(0)]):n._e(),n._v(" "),0<n.cardata.length||0<n.vipcardata.length?o("section",[o("div",{staticClass:"btnbox"},[o("p",{staticClass:"setprioc"},[n._v("\n        总计：\n        "),o("em",{staticStyle:{color:"#F5AC9E"}},[n._v("¥")]),n._v(" "),o("span",[n._v(n._s(n._f("toFixed")(n.allPrice)))])]),n._v(" "),o("div",{staticClass:"qujie",on:{click:n.gobuy}},[n._v("去结算")])])]):n._e(),n._v(" "),o("coupon",{directives:[{name:"show",rawName:"v-show",value:n.showCoupon,expression:"showCoupon"}],attrs:{bindData:n.showCoupon,way:"shoppingcar",cid:n.cid},on:{closeCou:function(t){n.showCoupon=!n.showCoupon}}}),n._v(" "),o("statuserr",{attrs:{scode:n.statusCode},on:{reload:n.BindData}})],1)}var i=a(0),n=a.n(i),o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nodedata"},[s("img",{attrs:{src:a(104)}}),t._v(" "),s("div",{staticClass:"wenzi"},[s("p",[t._v("客官，您的购物车空空如也")]),t._v(" "),s("p",{staticClass:"fontSize12"},[t._v("好东西，手慢无")]),t._v(" "),s("div",{staticClass:"tag_big",attrs:{onclick:"ReturnToIndex(0);"}},[t._v("去逛逛")])])])}];s._withStripped=!0;var r=a(33),c=a(12),p={components:{coupon:r.a,statuserr:c.a},props:{},data:function(){return{dataover:!1,cardata:[],putongselctin:"",ptshopSelect:"",allPrice:"0.00",zongcarselect:[!1,!1],Comfirmdata:[],vipcardata:[],vipselctin:"",vipshopSelect:"",vipComfirmdata:[],statustop:0,showCoupon:!1,cid:"",statusCode:"1"}},filters:{toFixed:function(t){return Number(t).toFixed(2)},onselect:function(t){if(1!=t)return 0==t?"border:1px solid #D8D8D8":"background:#D8D8D8;opacity:0.6"},minbuyshow:function(t,e){if(0!=t){if(e==t)return"color:#999999"}else if(1==e)return"color:#999999"}},watch:{},computed:{},methods:{BindData:function(){var s=this;window.api&&api.showProgress({text:"请耐心等待...",modal:!0}),s.dataover=!1,s.cardata=[],s.putongselctin="",s.ptshopSelect="",s.allPrice="0.00",s.zongcarselect=[!1,!1],s.Comfirmdata=[],s.vipcardata=[],s.vipselctin="",s.vipshopSelect="",s.vipComfirmdata=[],https({url:siteUrl+"Main/Shopping/GetCartJson?uid="+getname(),data:{uid:getname()},method:"post",headers:1,successBack:function(t){var n=[],e=[];t.success&&1==t.status&&null!=t.Data?(t.Data.json.forEach(function(t,i){e.push(!1),n.push([]),t.forEach(function(t,e){var s=0;1==t.rushbuystatus||2==t.rushbuystatus?s=4:0==t.rushbuystatus&&t.prorushbuy&&t.isrushbuy&&t.prorushbuy.begintimeticks>t.nowtimetick&&(s=3),n[i].push({delelshow:!1,onselect:s,price:t.price,qty:t.qty,id:t.id})})}),s.putongselctin=n,s.ptshopSelect=e,s.cardata=t.Data.json):1==t.status||promptMsg(t.err),s.statusCode="1"},errorBack:function(t){api.hideProgress(),s.statusCode=t.statusCode,s.dataover=!0,promptMsg(t.msg)}}),Vue.nextTick(function(){s.vipBindData()})},vipBindData:function(){var s=this;https({url:siteUrl+"Main/Shopping/GetCartJson?uid="+getname(),data:{uid:getname(),isuserpre:!0},method:"post",headers:1,successBack:function(t){var n=[],e=[];t.success&&1==t.status&&null!=t.Data?(t.Data.json.forEach(function(t,i){e.push(!1),n.push([]),t.forEach(function(t,e){var s=0;1==t.rushbuystatus||2==t.rushbuystatus?s=4:0==t.rushbuystatus&&t.prorushbuy&&t.isrushbuy&&t.prorushbuy.begintimeticks<t.nowtimetick&&(s=3),n[i].push({delelshow:!1,onselect:s,price:t.price,qty:t.qty,id:t.id})})}),s.vipselctin=n,s.vipshopSelect=e,s.vipcardata=t.Data.json):1==t.status||promptMsg(t.err),s.dataover=!0,setTimeout(function(){api.hideProgress(),api.refreshHeaderLoadDone()},1e3)},errorBack:function(t){api.hideProgress(),promptMsg(t.msg)}})},changenum:function(t,e,s,i,n,o,a){var r,c=this;if(t){if(r=Number(s)+1,0!=e&&e<=s)return void promptMsg("最大购买数量为"+e)}else{if(1==s)return 0==e?void promptMsg("最小购买数量为1件"):(promptMsg("最小购买数量为"+e),void(r=e));if(r=Number(s)-1,0!=e&&s<=e)return void promptMsg("最小购买数量为"+e)}https({url:siteUrl+"Main/Shopping/ModifyCartItem",data:{itemid:i,qty:r,optype:"moa",uid:getname()},headers:1,successBack:function(t){if(1==t.status){window.api&&api.execScript({name:"root",script:"ShoppingCartCount();"});var e=a?c.vipselctin:c.putongselctin;0==a?(c.putongselctin[n][o].qty=r,c.putongselctin=e):(c.vipselctin[n][o].qty=r,c.vipselctin=e),c.countprice(a)}else promptMsg(t.err)}})},changselect:function(t,e,s,i){var n=this,o=i?n.vipselctin:n.putongselctin;if(0<n.Comfirmdata.length){if(1==i)return void promptMsg("不能同时选择两个区的商品")}else if(0<n.vipComfirmdata.length&&0==i)return void promptMsg("不能同时选择两个区的商品");3!=s?4!=s?(0==s?(o[t][e].onselect=1,0==i?n.putongselctin=o:n.vipselctin=o,n.checkallSelect(t,e,i)):1==s&&((o[t][e].onselect=0)==i?(n.putongselctin=o,Vue.set(n.ptshopSelect,t,!1)):(n.vipselctin=o,Vue.set(n.vipshopSelect,t,!1))),n.countprice(i)):promptMsg("活动已失效"):promptMsg("活动尚未开始")},ShopAllSelect:function(s,t){var e=this;if(0<e.Comfirmdata.length){if(1==t)return void promptMsg("不能同时选择两个区的商品")}else if(0<e.vipComfirmdata.length&&0==t)return void promptMsg("不能同时选择两个区的商品");var i=t?e.vipselctin:e.putongselctin,n=t?e.vipshopSelect:e.ptshopSelect;n[s]?i[s].forEach(function(t,e){3!=t.onselect&&4!=t.onselect&&(i[s][e].onselect=0)}):i[s].forEach(function(t,e){3!=t.onselect&&4!=t.onselect&&(i[s][e].onselect=1)}),Vue.set(n,s,!n[s]),0==t?e.putongselctin=i:e.vipselctin=i,e.countprice(t)},countprice:function(t){var e=this,s=0,i=[],n=[];(t?e.vipselctin:e.putongselctin).forEach(function(t,e){t.forEach(function(t,e){3!=t.onselect&&4!=t.onselect&&n.push(1),1==t.onselect&&(s=Number(s)+Number(t.qty*t.price),i.push(t.id))})}),i.length==n.length&&0<n.length?Vue.set(e.zongcarselect,t,!0):Vue.set(e.zongcarselect,t,!1),0==t?e.Comfirmdata=i:e.vipComfirmdata=i,e.allPrice=s},checkallSelect:function(t,e,s){var i=!0;(s?this.vipselctin[t]:this.putongselctin[t]).forEach(function(t,e){0==t.onselect&&(i=!1)}),i&&(0==s?Vue.set(this.ptshopSelect,t,!0):Vue.set(this.vipshopSelect,t,!0))},allcardata:function(i,t){var n=this;if(0<n.Comfirmdata.length){if(1==t)return void promptMsg("不能同时选择两个区的商品")}else if(0<n.vipComfirmdata.length&&0==t)return void promptMsg("不能同时选择两个区的商品");var o=t?n.vipselctin:n.putongselctin;o.forEach(function(t,s){t.forEach(function(t,e){n.zongcarselect[i]?3!=t.onselect&&4!=t.onselect&&(o[s][e].onselect=0):3!=t.onselect&&4!=t.onselect&&(o[s][e].onselect=1)})});for(var e=[],s=t?n.vipshopSelect:n.ptshopSelect,a=0;a<s.length;a++)n.zongcarselect[i]?e.push(!1):e.push(!0);0==t?(n.ptshopSelect=e,n.putongselctin=o):(n.vipshopSelect=e,n.vipselctin=o),n.countprice(t)},OpenCompanyShops:function(t){api.openWin({name:"companyshop",url:"./company/companyshop.html",pageParam:{companyid:t},bgColor:"#fff"})},gopro:function(t){OpenProdctPage(t)},ChangeCount:function(t,e,s,i,n,o,a){var r=this;amountDialogBox("修改购买数量",s,function(s){999<s||0==s?promptMsg("输入数量有误"):e<s&&0!=e?promptMsg("购买数量不能大于"+e):s<t&&0!=t?promptMsg("购买数量不能小于"+t):https({url:siteUrl+"Main/Shopping/ModifyCartItem",data:{itemid:i,qty:s,optype:"moa",uid:getname()},headers:1,successBack:function(t){if(1==t.status){api.execScript({name:"root",script:"ShoppingCartCount();"});var e=a?r.vipselctin:r.putongselctin;0==a?(r.putongselctin[n][o].qty=s,r.putongselctin=e):(r.vipselctin[n][o].qty=s,r.vipselctin=e),r.countprice(a)}else promptMsg(t.err)}})})},delpro:function(t){var e=this;comfirmDialogBox("确认删除购物车",function(){https({url:siteUrl+"Main/Shopping/ModifyCartItem",data:{itemid:t,qty:0,optype:"delete",uid:getname()},headers:1,successBack:function(t){e.BindData(),api.execScript({name:"root",script:"ShoppingCartCount();"})}})})},gobuy:function(){var t=this;if(0!=t.vipComfirmdata.length||0!=t.Comfirmdata.length){var e;if(0<t.vipComfirmdata.length)e=t.vipComfirmdata;else{if(!(0<t.Comfirmdata.length))return void promptMsg("数据出错，有BUG");e=t.Comfirmdata}openWin({name:"ordercomfirm",url:"./ordercomfirm.html",pageParam:{way:"shoppingcart",ids:e.join(",")}})}else promptMsg("请选择商品")},touchstartF:function(t){this.x=t.changedTouches[0].pageX,this.y=t.changedTouches[0].pageY,this.swipeX=!0,this.swipeY=!0,window.api&&api.setFrameAttr({name:api.frameName,bounces:!1})},touchmoveF:function(t,e,s,i){window.api&&api.setFrameAttr({name:api.frameName,bounces:!0});var n=this;if(this.X=t.changedTouches[0].pageX,this.Y=t.changedTouches[0].pageY,n.swipeX&&0<Math.abs(n.X-n.x)-Math.abs(n.Y-n.y)){var o;if(t.stopPropagation(),10<n.X-n.x)(o=i?n.vipselctin:n.putongselctin)[e][s].delelshow=!1,0==i?n.putongselctin=o:n.vipselctin=o;if(10<n.x-n.X)(o=i?n.vipselctin:n.putongselctin)[e][s].delelshow=!0,0==i?n.putongselctin=o:n.vipselctin=o;this.swipeY=!1}this.swipeY&&Math.abs(this.X-this.x)-Math.abs(this.Y-this.y)<0&&(this.swipeX=!1)},gocouopn:function(t){this.cid=t,this.showCoupon=!0}},created:function(){},mounted:function(){var s=this;window.api&&(s.statustop=$api.getStorage("statustop"),s.sheight=45+Number($api.getStorage("statustop")),api.addEventListener({name:"payorderCart"},function(t,e){s.BindData()}),api.addEventListener({name:"viewappear"},function(t,e){s.BindData(),api.execScript({name:"root",script:"ShoppingCartCount()"})}),api.setCustomRefreshHeaderInfo({bgColor:"#fff",images:["widget://image/suaxin1.png","widget://image/suaxin2.png","widget://image/suaxin3.png","widget://image/suaxin4.png","widget://image/suaxin5.png","widget://image/suaxin6.png","widget://image/suaxin7.png"],tips:{pull:"下拉刷新",threshold:"松开立即刷新",load:"正在刷新"}},function(){window.onscroll=function(){0<document.body.scrollTop&&api.refreshHeaderLoadDone()},s.BindData()})),s.BindData()}},u=(a(221),a(1)),l=Object(u.a)(p,s,o,!1,null,null,null);l.options.__file="src/page/shoppingcar/index.vue";var d=l.exports;openapp?window.apiready=function(){new n.a({render:function(t){return t(d)}}).$mount("#app")}:new n.a({render:function(t){return t(d)}}).$mount("#app")},33:function(t,e,s){"use strict";function i(){var i=this,t=i.$createElement,n=i._self._c||t;return n("section",[n("div",{staticClass:"zhezhao",on:{click:i.closeCoupon}}),i._v(" "),n("div",{staticClass:"couponn"},[n("div",{staticClass:"titlel"},[n("div",{staticStyle:{"font-size":"14px",opacity:"0"}},[i._v("1")]),i._v(" "),n("div",{staticClass:"t"},[i._v("领取优惠券")]),i._v(" "),n("div",{staticClass:"guanbi",on:{click:i.closeCoupon}},[n("img",{attrs:{src:s(50),alt:""}})])]),i._v(" "),n("div",{staticClass:"line"}),i._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"canget"},[n("div",{staticClass:"cangetHead"},[i._v("可领取优惠券"),i.isshoppingcar?n("span",[i._v("领取后可用于购物车商品")]):i._e()]),i._v(" "),i._l(i.unGet,function(e,s){return n("div",{key:s,staticClass:"item"},[n("div",{staticClass:"left"},[n("div",{staticClass:"price"},[n("span",[i._v("￥")]),i._v(" "),n("span",[i._v(i._s(e.israandom?"??":e.facevalue))])]),i._v(" "),n("span",[i._v("满"+i._s(e.uselimit)+"元可用")])]),i._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"cexplain"},[n("div",{staticClass:"titlel"},[n("span",[n("span",{staticClass:"tt"},[i._v(i._s(e.companyname))]),i._v(i._s(e.name))])]),i._v(" "),n("div",{staticClass:"content"},[i._v(i._s(e.israandom?"随机券":e.couponalias))]),i._v(" "),n("div",{staticClass:"date"},[i._v(i._s(e.time))])]),i._v(" "),n("div",{staticClass:"btn",on:{click:function(t){return t.stopPropagation(),i.getCoupon(s,e.couponid)}}},[i._v("立即领取")]),i._v(" "),1==e.state||2==e.state?n("div",{staticClass:"closePass"},[i._v(i._s(1==e.state?"即将过期":2==e.state?"已过期":""))]):i._e()])])})],2),i._v(" "),i.unGet?i._e():n("div",{staticClass:"nodataa"},[n("img",{attrs:{src:s(25)}}),i._v(" "),n("span",{staticClass:"p"},[i._v("很遗憾")]),i._v(" "),n("span",[i._v("您暂无可以领取的优惠券")])])])])])}i._withStripped=!0;var n,o=s(11),a=s.n(o),r={props:(n={gbid:{type:String,required:!1},pid:{type:String,required:!1}},a()(n,"gbid",{type:String,required:!1}),a()(n,"cid",{type:String,required:!1}),a()(n,"rbid",{type:String,required:!1}),a()(n,"way",{type:String,required:!1}),a()(n,"bindData",{type:Boolean,required:!1}),n),data:function(){return{isshoppingcar:0,hasGet:"",unGet:"",isgroupbuy:!1,isDone:!1,hasUnGet:!1,uid:"",loadTimer:null}},created:function(){this.uid=window.api?api.getPrefs({sync:!0,key:"SessionUserID"}):$api.getStorage("SessionUserID")},computed:{},watch:{bindData:function(t){t&&this.getMsg()}},methods:{getCoupon:function(s,t){var i=this;https({url:siteUrl+"Marketing/Coupon/ReceiveCoupon",data:{uid:this.uid,couponid:t},headers:1,successBack:function(t){if(t&&t.success&&1==t.status){promptMsg("领取成功");var e=i.unGet[s];""==i.hasGet&&(i.hasGet=[]),e.getnum+=1,e.eachamount-e.getnum<=0?(i.unGet.splice(s,1),0==i.unGet.length&&(i.unGet="")):i.unGet[s]=e,i.hasGet.push(e),i.$forceUpdate()}else if(5==t.status){promptMsg("该优惠券已全部领完了");i.unGet[s];i.unGet.splice(s,1),i.$forceUpdate()}else promptMsg(t.err)}})},getMsg:function(){this.unGet&&0<this.unGet.length||this.hasGet&&0<this.hasGet.length||(this.loadTimer=setTimeout(function(){showLoading()},500)),this.$props.gbid&&(this.isgroupbuy=!0),this.isshoppingcar="shoppingcar"==this.$props.way?1:0,this.$props.gbid?this.getGbCou():this.$props.rbid?this.getRushCoupon():this.$props.pid?this.getProCoupon():this.getComMsg()},getRushCoupon:function(){var s=this;https({url:siteUrl+"Marketing/Coupon/GetCouponListJson",data:{uid:s.uid,ispaltform:3,activityid:this.$props.rbid},header:1,successBack:function(t){if(t.success&&1==t.status){var e=t.Data;e.length?s.screenCoupon(e):s.isDone=!0}else promptMsg(t.err)}})},getGbCou:function(){var s=this;https({url:siteUrl+"Marketing/Coupon/GetCouponListJson",data:{uid:this.uid,ispaltform:3,gbid:this.$props.gbid,comid:this.$props.cid,isgb:!0},successBack:function(t){if(t.success&&1==t.status){var e=t.Data;e.length?s.screenCoupon(e):s.isDone=!0}else promptMsg(t.err)}})},getProCoupon:function(){var e=this;https({url:siteUrl+"Marketing/Coupon/GetCompanyPlatformCoupon",data:{CompanyID:this.$props.cid,uid:this.uid,proId:this.$props.pid},header:1,successBack:function(t){e.proCouponBack(t)}})},proCouponBack:function(t){if(t.success&&1==t.status){var e=[],s=t.CompanyData,i=t.Platform;s.length&&s.forEach(function(t){1==t.prolimit&&e.push(t)}),i.length&&i.forEach(function(t){1==t.prolimit&&e.push(t)}),e.length?this.screenCoupon(e):this.isDone=!0}else promptMsg(t.err)},getComMsg:function(){var s=this;https({url:siteUrl+"Marketing/Coupon/GetCouponListJson",data:{uid:this.uid,comid:this.$props.cid,ispaltform:3},headers:1,successBack:function(t){var e=[];t.success&&1==t.status?t.Data.length&&t.Data.forEach(function(t){e.push(t)}):promptMsg(t.err),e.length?s.screenCoupon(e):s.isDone=!0}})},getTime:function(t,e){var s=t.split(" ")[0],i=e.split(" ")[0],n=s.split("."),o=i.split(".");return n[0]+"年"+n[1]+"月"+n[2]+"日-"+o[0]+"年"+o[1]+"月"+o[2]+"日"},getState:function(t){var e=Date.now(),s=t.replace(/\./g,":").replace(" ",":");s=s.split(":");var i=new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5]),n=Date.parse(new Date(i))-e;return 0<n&&n<=432e6?1:n<=0?2:0},screenCoupon:function(t){var i=this;null!=this.loadTimer&&(hideLoading(),clearTimeout(this.loadTimer),this.loadTimer=null);var n=[],o=[];t.forEach(function(t){if(!t.isover&&0<t.eachamount-t.getnum&&2!=t.couponType&&3!=t.couponType){if(t.time=i.getTime(t.starttime,t.endtime),t.state=i.getState(t.userendtime),o.push(t),t.getnum)if(1<t.getnum)for(var e=0;e<t.getnum;e++)n.push(t);else n.push(t)}else if(t.time=i.getTime(t.starttime,t.endtime),t.state=i.getState(t.userendtime),t.isget)if(1<t.getnum)for(var s=0;s<t.getnum;s++)n.push(t);else n.push(t)}),n.length||(n=""),o.length||(o=""),this.hasGet=n,this.unGet=o,this.$forceUpdate()},closeCoupon:function(){this.$emit("closeCou")}}},c=(s(51),s(1)),p=Object(c.a)(r,i,[],!1,null,null,null);p.options.__file="src/components/coupon_pop/coupon_pop.vue";e.a=p.exports},43:function(t,e,s){t.exports=s.p+"img/shoppingcar-select.png"},50:function(t,e,s){t.exports=s.p+"img/guanbi1.png"},51:function(t,e,s){"use strict";var i=s(23);s.n(i).a},7:function(t,e,s){},92:function(t,e,s){}});