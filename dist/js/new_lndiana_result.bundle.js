!function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=259)}({0:function(t,e){t.exports=Vue},1:function(t,e,n){"use strict";function r(t,e,n,r,i,a,o,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=l):i&&(l=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:u}}n.d(e,"a",function(){return r})},11:function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},18:function(t,e,n){t.exports=n.p+"img/man.jpg"},195:function(t,e,n){"use strict";var r=n(81);n.n(r).a},259:function(t,e,i){"use strict";i.r(e);function n(){var n=this,t=n.$createElement,r=n._self._c||t;return r("section",[r("div",{staticClass:"upper flex flex_pack_center flex_align_center"},[r("div",{staticClass:"back flex flex_v flex_align_center"},[n.proMsg?r("div",{staticClass:"proDetail flex"},[r("img",{attrs:{src:n.proMsg.proimg},on:{error:function(t){return n.onerr(t)}}}),n._v(" "),r("div",{staticClass:"content flex flex_v flex_pack_justify_between"},[r("div",{staticClass:"title line_over_2",domProps:{innerHTML:n._s(n.proMsg.proname)}}),n._v(" "),r("div",{staticClass:"price flex"},[r("span",[n._v("￥")]),n._v(" "),r("span",{},[n._v(n._s(n.proMsg.cloudPrice))]),n._v(" "),r("span",{staticStyle:{"text-decoration":"line-through"}},[n._v(n._s("原价"+n.proMsg.proprice))])])])]):n._e(),n._v(" "),r("div",{staticStyle:{width:"90%",height:"1px",background:"#DEDEE1"}}),n._v(" "),n.detail?n._e():r("span",{staticClass:"bingo"},[n._v(n._s(0==n.pageParam.invalid?"本期获奖编号":"该抽奖已失效"))]),n._v(" "),n.detail?n._e():r("span",{staticClass:"bingo code"},[n._v(n._s(0==n.pageParam.invalid?n.pageParam.winningcode:"　"))]),n._v(" "),n.detail&&4==n.proMsg.state?r("span",{staticClass:"bingo"},[n._v("活动已开奖，请到活动揭晓页查看中奖人信息")]):n.detail&&3==n.proMsg.state?r("span",{staticClass:"bingo"},[n._v("遗憾，活动没有达到开奖条件，已过期")]):n.detail&&0!=n.userData.remaining?r("span",{staticClass:"bingo"},[n._v("我正在参与抽奖")]):n.detail&&0==n.userData.remaining?r("span",{staticClass:"bingo"},[n._v("恭喜您，正在等待开奖")]):n._e(),n._v(" "),n.detail?n._e():r("div",{staticClass:"bingoer flex flex_v flex_align_center"},[0==n.pageParam.invalid?r("img",{attrs:{src:n.pageParam.img&&"null"!=n.pageParam.img?n.pageParam.img:"./img/man.jpg"}}):r("img",{attrs:{src:i(18)}})]),n._v(" "),n.detail?n._e():r("span",{staticClass:"username",staticStyle:{color:"#EB6100"},style:n.detail?"marginBottom: 0":""},[n._v(n._s(0==n.pageParam.invalid?"获奖者:"+n.pageParam.user:"　"))]),n._v(" "),n.detail?r("div",{staticClass:"avatar flex flex_pack_justify_around",staticStyle:{"flex-wrap":"wrap",width:"70%","margin-top":"5%"}},[r("div",{staticClass:"item flex flex_v flex_align_center"},[n.userData.userimg?r("img",{attrs:{src:n.userData.userimg}}):r("img",{attrs:{src:i(18),alt:""}}),n._v(" "),r("span",{staticClass:"color_999"},[n._v(n._s(n._f("hidePhone")(n.userData.username)))])]),n._v(" "),n._l(n.userData.sharedes,function(t,e){return r("div",{key:e,staticClass:"item flex flex_v flex_align_center"},[t.userhead?r("img",{attrs:{src:t.userhead}}):r("img",{attrs:{src:i(18),alt:""}}),n._v(" "),r("span",{staticClass:"color_999 line_over_1"},[n._v(n._s(t.username))])])}),n._v(" "),n._l(n.remaining,function(t,e){return r("div",{key:e,staticClass:"item flex flex_v flex_align_center"},[r("img",{attrs:{src:i(26)}}),n._v(" "),r("span",{staticClass:"color_999 line_over_1"},[n._v("待助力")])])})],2):n._e(),n._v(" "),3!=n.proMsg.state&&4!=n.proMsg.state||"detail"!=n.pageParam.way?"detail"!=n.pageParam.way||n.done?n.done&&"detail"==n.pageParam.way?r("div",{staticClass:"btn gradient",on:{click:n.goshare}},[n._v("立即炫耀")]):n._e():r("div",{staticClass:"btn gradient",on:{click:n.goshare}},[n._v("继续邀请好友助力")]):r("div",{staticClass:"btn",staticStyle:{"background-color":"#9b9b9b"}},[n._v("已结束")])])]),n._v(" "),n.detail?r("div",{staticClass:"explain",staticStyle:{background:"#fff"}},[r("div",{staticClass:"title text_center",staticStyle:{color:"#427161"}},[n._v("玩法说明")]),n._v(" "),n._m(0)]):r("div",{staticClass:"detail flex flex_v flex_align_center"},[r("div",{staticClass:"flex flex_pack_justify_between flex_align_center"},[r("span",{staticStyle:{color:"#9b9b9b"}},[n._v("参与人数")]),n._v(" "),n.proMsg?r("span",{staticStyle:{color:"#9b9b9b"}},[n._v(n._s(n.proMsg.amout+"人次"))]):n._e()]),n._v(" "),r("div",{staticStyle:{width:"90%",height:"1px",background:"#f6f6fa"}}),n._v(" "),r("div",{staticClass:"flex flex_pack_justify_between flex_align_center"},[r("span",{staticStyle:{color:"#9b9b9b"}},[n._v(n._s(0==n.pageParam.invalid?"揭晓":"结束")+"时间")]),n._v(" "),r("span",{staticStyle:{color:"#9b9b9b"}},[n._v(n._s(n.pageParam.endtime))])])]),n._v(" "),n.detail?r("div",{staticClass:"footer flex flex_pack_center flex_align_center",on:{click:n.goLndiana}},[r("div",{staticClass:"other flex flex_pack_center flex_align_center"},[n._v("其他活动")])]):n._e()])}var r=i(0),a=i.n(r),o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content flex flex_v flex_align_center"},[n("img",{attrs:{src:i(49)}}),t._v(" "),n("div",{staticClass:"flex flex_pack_justify_around"},[n("div",[n("span",{staticStyle:{color:"#9B9B9B"}},[t._v("选择商品 参加活动")])]),t._v(" "),n("div",[n("span",{staticStyle:{color:"#9B9B9B"}},[t._v("邀请好友 为你助力")])]),t._v(" "),n("div",[n("span",{staticStyle:{color:"#9B9B9B"}},[t._v("人满获得 夺宝资格")])]),t._v(" "),n("div",[n("span",{staticStyle:{color:"#9B9B9B"}},[t._v("中奖发奖 失败退款")])])])])}];n._withStripped=!0;var s=i(11),l=i.n(s),u={data:function(){var t;return t={pageParam:"",proMsg:"",detail:""},l()(t,"detail",!1),l()(t,"userData",""),l()(t,"status",0),l()(t,"remaining",""),l()(t,"done",!1),l()(t,"isDone",!1),t},filters:{hidePhone:function(t){if(t){var e=String(t);return new RegExp(/^1[34578]\d{9}$/).test(e)?String(e).substr(0,3)+"****"+String(e).substr(8,3):t}}},created:function(){if(window.api&&(this.pageParam=api.pageParam,this.pageParam.user&&new RegExp(/^1[34578]\d{9}$/).test(this.pageParam.user))){var t=String(this.pageParam.user).substr(0,3),e=String(this.pageParam.user).substr(8,3);this.pageParam.user=t+"****"+e}"detail"==pageParam("way")&&(this.detail=!0,this.getUserData()),this.getProData()},methods:{getProData:function(){var e=this;showLoading(),https({url:siteUrl+"Marketing/Cloudbuy/GetOneCloudShoppingSet",data:{cloudid:pageParam("cloudid"),userid:getname()},successBack:function(t){hideLoading(),t.success&&1==t.status?e.proMsg=t.Data[0]:promptMsg(t.err),e.isDone=!0}})},getUserData:function(){var r=this;https({url:siteUrl+"Marketing/Cloudbuy/IsPayCloud?uid="+getname(),method:"post",data:{uid:getname(),cloudid:pageParam("cloudid"),buycount:0},headers:1,successBack:function(t){if(t.success){var e=t.Data;if(1!=t.status&&20!=t.status)return promptMsg(t.err);if(e.sharedes&&0<e.sharedes.length&&(e.sharedes=JSON.parse(e.sharedes)),e.remaining){r.remaining=[];for(var n=0;n<e.remaining;n++)r.remaining.push(n)}else r.done=!0,r.status=t.status;r.userData=e}else promptMsg(t.err);r.getProData()}})},goshare:function(){api.openFrame({name:"marketing_shaerdiv",url:"./marketing_shaerdiv.html",rect:{x:0,y:0,w:"auto",h:"auto"},pageParam:{data:this.proMsg,userData:this.userData,way:"lndiana",cloudid:pageParam("cloudid"),buycount:0},bounces:!1,bgColor:"rgba(0,0,0,0)"})},goLndianaDetail:function(){openWin({name:"lndianaDetail",url:"./new_lndianaDetail.html",bgColor:"#f6f6fa",pageParam:{title:"商品详情",cloudid:pageParam("cloudid"),hScrollBarEnabled:!1,vScrollBarEnabled:!1}},1)},goLndiana:function(){openWin({name:"lndiana",url:"./new_lndiana.html",bgColor:"#f6f6fa",pageParam:{title:"天天抽奖",hScrollBarEnabled:!1,vScrollBarEnabled:!1,bounces:!0}},1)},onerr:function(t){t.target.src="./img/bkg_cover.jpg"}}},c=(i(195),i(1)),d=Object(c.a)(u,n,o,!1,null,null,null);d.options.__file="src/page/new_lndiana_result/new_lndiana_result.vue";var f=d.exports,h=i(4),p=i.n(h);a.a.use(p.a,{loading:"../../img/bkg_cover.jpg",error:"../../img/bkg_cover.jpg"});openapp?window.apiready=function(){new a.a({render:function(t){return t(f)}}).$mount("#app")}:new a.a({render:function(t){return t(f)}}).$mount("#app")},26:function(t,e,n){t.exports=n.p+"img/hui.png"},4:function(t,e,n){
/*!
 * Vue-Lazyload.js v1.2.6
 * (c) 2018 Awe <hilongjw@gmail.com>
 * Released under the MIT License.
 */
t.exports=function(){"use strict";function o(t){t=t||{};var e=arguments.length,n=0;if(1===e)return t;for(;++n<e;){var r=arguments[n];f(t)&&(t=r),s(r)&&i(t,r)}return t}function i(t,e){for(var n in h(t,e),e)if("__proto__"!==n&&(i=e,a=n,Object.prototype.hasOwnProperty.call(i,a))){var r=e[n];s(r)?("undefined"===p(t[n])&&"function"===p(r)&&(t[n]=r),t[n]=o(t[n]||{},r)):t[n]=r}var i,a;return t}function s(t){return"object"===p(t)||"function"===p(t)}function a(t,e){if(t.length){var n=t.indexOf(e);return-1<n?t.splice(n,1):void 0}}function d(t,e){if("IMG"===t.tagName&&t.getAttribute("data-srcset")){var n=t.getAttribute("data-srcset"),r=[],i=t.parentNode,a=i.offsetWidth*e,o=void 0,s=void 0,l=void 0;(n=n.trim().split(",")).map(function(t){t=t.trim(),o=t.lastIndexOf(" "),l=-1===o?(s=t,999998):(s=t.substr(0,o),parseInt(t.substr(o+1,t.length-o-2),10)),r.push([l,s])}),r.sort(function(t,e){if(t[0]<e[0])return-1;if(t[0]>e[0])return 1;if(t[0]===e[0]){if(-1!==e[1].indexOf(".webp",e[1].length-5))return 1;if(-1!==t[1].indexOf(".webp",t[1].length-5))return-1}return 0});for(var u="",c=void 0,d=r.length,f=0;f<d;f++)if((c=r[f])[0]>=a){u=c[1];break}return u}}function l(t,e){for(var n=void 0,r=0,i=t.length;r<i;r++)if(e(t[r])){n=t[r];break}return n}function c(){}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),f=function(t){return null==t||"function"!=typeof t&&"object"!==(void 0===t?"undefined":u(t))},h=function(t,e){if(null==t)throw new TypeError("expected first argument to be an object.");if(void 0===e||"undefined"==typeof Symbol)return t;if("function"!=typeof Object.getOwnPropertySymbols)return t;for(var n=Object.prototype.propertyIsEnumerable,r=Object(t),i=arguments.length,a=0;++a<i;)for(var o=Object(arguments[a]),s=Object.getOwnPropertySymbols(o),l=0;l<s.length;l++){var u=s[l];n.call(o,u)&&(r[u]=o[u])}return r},n=Object.prototype.toString,p=function(t){var e=void 0===t?"undefined":u(t);return"undefined"===e?"undefined":null===t?"null":!0===t||!1===t||t instanceof Boolean?"boolean":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?void 0!==t.constructor.name&&"Generator"===t.constructor.name.slice(0,9)?"generatorfunction":"function":void 0!==Array.isArray&&Array.isArray(t)?"array":t instanceof RegExp?"regexp":t instanceof Date?"date":"[object RegExp]"===(e=n.call(t))?"regexp":"[object Date]"===e?"date":"[object Arguments]"===e?"arguments":"[object Error]"===e?"error":"[object Promise]"===e?"promise":function(t){return t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}(t)?"buffer":"[object Set]"===e?"set":"[object WeakSet]"===e?"weakset":"[object Map]"===e?"map":"[object WeakMap]"===e?"weakmap":"[object Symbol]"===e?"symbol":"[object Map Iterator]"===e?"mapiterator":"[object Set Iterator]"===e?"setiterator":"[object String Iterator]"===e?"stringiterator":"[object Array Iterator]"===e?"arrayiterator":"[object Int8Array]"===e?"int8array":"[object Uint8Array]"===e?"uint8array":"[object Uint8ClampedArray]"===e?"uint8clampedarray":"[object Int16Array]"===e?"int16array":"[object Uint16Array]"===e?"uint16array":"[object Int32Array]"===e?"int32array":"[object Uint32Array]"===e?"uint32array":"[object Float32Array]"===e?"float32array":"[object Float64Array]"===e?"float64array":"object"},v=o,m="undefined"!=typeof window,r=m&&"IntersectionObserver"in window,_={event:"event",observer:"observer"},y=function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}if(m)return"function"==typeof window.CustomEvent?window.CustomEvent:(t.prototype=window.Event.prototype,t)}(),g=function(){if(m){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}}(),w={on:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];g?t.addEventListener(e,n,{capture:r,passive:!0}):t.addEventListener(e,n,r)},off:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];t.removeEventListener(e,n,r)}},x=function(t,e,n){var r=new Image;r.src=t.src,r.onload=function(){e({naturalHeight:r.naturalHeight,naturalWidth:r.naturalWidth,src:r.src})},r.onerror=function(t){n(t)}},e=function(t,e){return"undefined"!=typeof getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.style[e]},k=function(t){return e(t,"overflow")+e(t,"overflow-y")+e(t,"overflow-x")},L={},E=function(){function u(t){var e=t.el,n=t.src,r=t.error,i=t.loading,a=t.bindType,o=t.$parent,s=t.options,l=t.elRenderer;b(this,u),this.el=e,this.src=n,this.error=r,this.loading=i,this.bindType=a,this.attempt=0,this.naturalHeight=0,this.naturalWidth=0,this.options=s,this.rect=null,this.$parent=o,this.elRenderer=l,this.performanceData={init:Date.now(),loadStart:0,loadEnd:0},this.filter(),this.initState(),this.render("loading",!1)}return t(u,[{key:"initState",value:function(){"dataset"in this.el?this.el.dataset.src=this.src:this.el.setAttribute("data-src",this.src),this.state={error:!1,loaded:!1,rendered:!1}}},{key:"record",value:function(t){this.performanceData[t]=Date.now()}},{key:"update",value:function(t){var e=t.src,n=t.loading,r=t.error,i=this.src;this.src=e,this.loading=n,this.error=r,this.filter(),i!==this.src&&(this.attempt=0,this.initState())}},{key:"getRect",value:function(){this.rect=this.el.getBoundingClientRect()}},{key:"checkInView",value:function(){return this.getRect(),this.rect.top<window.innerHeight*this.options.preLoad&&this.rect.bottom>this.options.preLoadTop&&this.rect.left<window.innerWidth*this.options.preLoad&&0<this.rect.right}},{key:"filter",value:function(){var e=this;(function(t){if(!(t instanceof Object))return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e})(this.options.filter).map(function(t){e.options.filter[t](e,e.options)})}},{key:"renderLoading",value:function(e){var n=this;x({src:this.loading},function(t){n.render("loading",!1),e()},function(){e(),n.options.silent})}},{key:"load",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c;return this.attempt>this.options.attempt-1&&this.state.error?(this.options.silent,void n()):this.state.loaded||L[this.src]?(this.state.loaded=!0,n(),this.render("loaded",!0)):void this.renderLoading(function(){e.attempt++,e.record("loadStart"),x({src:e.src},function(t){e.naturalHeight=t.naturalHeight,e.naturalWidth=t.naturalWidth,e.state.loaded=!0,e.state.error=!1,e.record("loadEnd"),e.render("loaded",!1),L[e.src]=1,n()},function(t){e.options.silent,e.state.error=!0,e.state.loaded=!1,e.render("error",!1)})})}},{key:"render",value:function(t,e){this.elRenderer(this,t,e)}},{key:"performance",value:function(){var t="loading",e=0;return this.state.loaded&&(t="loaded",e=(this.performanceData.loadEnd-this.performanceData.loadStart)/1e3),this.state.error&&(t="error"),{src:this.src,state:t,time:e}}},{key:"destroy",value:function(){this.el=null,this.src=null,this.error=null,this.loading=null,this.bindType=null,this.attempt=0}}]),u}(),S="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",C=["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"],j={rootMargin:"0px",threshold:0},A=function(c){return function(){function g(t){var e=t.preLoad,n=t.error,r=t.throttleWait,i=t.preLoadTop,a=t.dispatchEvent,o=t.loading,s=t.attempt,l=t.silent,u=void 0===l||l,c=t.scale,d=t.listenEvents,f=(t.hasbind,t.filter),h=t.adapter,p=t.observer,v=t.observerOptions;b(this,g),this.version="1.2.6",this.mode=_.event,this.ListenerQueue=[],this.TargetIndex=0,this.TargetQueue=[],this.options={silent:u,dispatchEvent:!!a,throttleWait:r||200,preLoad:e||1.3,preLoadTop:i||0,error:n||S,loading:o||S,attempt:s||3,scale:c||function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return m?window.devicePixelRatio||t:t}(c),ListenEvents:d||C,hasbind:!1,supportWebp:function(){if(!m)return!1;var t=!0,e=document;try{var n=e.createElement("object");n.type="image/webp",n.style.visibility="hidden",n.innerHTML="!",e.body.appendChild(n),t=!n.offsetWidth,e.body.removeChild(n)}catch(e){t=!1}return t}(),filter:f||{},adapter:h||{},observer:!!p,observerOptions:v||j},this._initEvent(),this.lazyLoadHandler=function(i,a){var o=null,s=0;return function(){if(!o){var t=Date.now()-s,e=this,n=arguments,r=function(){s=Date.now(),o=!1,i.apply(e,n)};a<=t?r():o=setTimeout(r,a)}}}(this._lazyLoadHandler.bind(this),this.options.throttleWait),this.setMode(this.options.observer?_.observer:_.event)}return t(g,[{key:"config",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};v(this.options,t)}},{key:"performance",value:function(){var e=[];return this.ListenerQueue.map(function(t){e.push(t.performance())}),e}},{key:"addLazyBox",value:function(t){this.ListenerQueue.push(t),m&&(this._addListenerTarget(window),this._observer&&this._observer.observe(t.el),t.$el&&t.$el.parentNode&&this._addListenerTarget(t.$el.parentNode))}},{key:"add",value:function(r,i,a){var o=this;if(function(t,e){for(var n=!1,r=0,i=t.length;r<i;r++)if(e(t[r])){n=!0;break}return n}(this.ListenerQueue,function(t){return t.el===r}))return this.update(r,i),c.nextTick(this.lazyLoadHandler);var t=this._valueFormatter(i.value),s=t.src,l=t.loading,u=t.error;c.nextTick(function(){s=d(r,o.options.scale)||s,o._observer&&o._observer.observe(r);var t=Object.keys(i.modifiers)[0],e=void 0;t&&(e=(e=a.context.$refs[t])?e.$el||e:document.getElementById(t)),e||(e=function(t){if(m){if(!(t instanceof HTMLElement))return window;for(var e=t;e&&e!==document.body&&e!==document.documentElement&&e.parentNode;){if(/(scroll|auto)/.test(k(e)))return e;e=e.parentNode}return window}}(r));var n=new E({bindType:i.arg,$parent:e,el:r,loading:l,error:u,src:s,elRenderer:o._elRenderer.bind(o),options:o.options});o.ListenerQueue.push(n),m&&(o._addListenerTarget(window),o._addListenerTarget(e)),o.lazyLoadHandler(),c.nextTick(function(){return o.lazyLoadHandler()})})}},{key:"update",value:function(e,t){var n=this,r=this._valueFormatter(t.value),i=r.src,a=r.loading,o=r.error;i=d(e,this.options.scale)||i;var s=l(this.ListenerQueue,function(t){return t.el===e});s&&s.update({src:i,loading:a,error:o}),this._observer&&(this._observer.unobserve(e),this._observer.observe(e)),this.lazyLoadHandler(),c.nextTick(function(){return n.lazyLoadHandler()})}},{key:"remove",value:function(e){if(e){this._observer&&this._observer.unobserve(e);var t=l(this.ListenerQueue,function(t){return t.el===e});t&&(this._removeListenerTarget(t.$parent),this._removeListenerTarget(window),a(this.ListenerQueue,t)&&t.destroy())}}},{key:"removeComponent",value:function(t){t&&(a(this.ListenerQueue,t),this._observer&&this._observer.unobserve(t.el),t.$parent&&t.$el.parentNode&&this._removeListenerTarget(t.$el.parentNode),this._removeListenerTarget(window))}},{key:"setMode",value:function(t){var e=this;r||t!==_.observer||(t=_.event),(this.mode=t)===_.event?(this._observer&&(this.ListenerQueue.forEach(function(t){e._observer.unobserve(t.el)}),this._observer=null),this.TargetQueue.forEach(function(t){e._initListen(t.el,!0)})):(this.TargetQueue.forEach(function(t){e._initListen(t.el,!1)}),this._initIntersectionObserver())}},{key:"_addListenerTarget",value:function(e){if(e){var t=l(this.TargetQueue,function(t){return t.el===e});return t?t.childrenCount++:(t={el:e,id:++this.TargetIndex,childrenCount:1,listened:!0},this.mode===_.event&&this._initListen(t.el,!0),this.TargetQueue.push(t)),this.TargetIndex}}},{key:"_removeListenerTarget",value:function(n){var r=this;this.TargetQueue.forEach(function(t,e){t.el===n&&(--t.childrenCount||(r._initListen(t.el,!1),r.TargetQueue.splice(e,1),t=null))})}},{key:"_initListen",value:function(e,n){var r=this;this.options.ListenEvents.forEach(function(t){return w[n?"on":"off"](e,t,r.lazyLoadHandler)})}},{key:"_initEvent",value:function(){var i=this;this.Event={listeners:{loading:[],loaded:[],error:[]}},this.$on=function(t,e){i.Event.listeners[t]||(i.Event.listeners[t]=[]),i.Event.listeners[t].push(e)},this.$once=function(e,n){var r=i;i.$on(e,function t(){r.$off(e,t),n.apply(r,arguments)})},this.$off=function(t,e){if(e)a(i.Event.listeners[t],e);else{if(!i.Event.listeners[t])return;i.Event.listeners[t].length=0}},this.$emit=function(t,e,n){i.Event.listeners[t]&&i.Event.listeners[t].forEach(function(t){return t(e,n)})}}},{key:"_lazyLoadHandler",value:function(){var e=this,n=[];this.ListenerQueue.forEach(function(t,e){if(!t.state.error&&t.state.loaded)return n.push(t);t.checkInView()&&t.load()}),n.forEach(function(t){return a(e.ListenerQueue,t)})}},{key:"_initIntersectionObserver",value:function(){var e=this;r&&(this._observer=new IntersectionObserver(this._observerHandler.bind(this),this.options.observerOptions),this.ListenerQueue.length&&this.ListenerQueue.forEach(function(t){e._observer.observe(t.el)}))}},{key:"_observerHandler",value:function(t,e){var n=this;t.forEach(function(e){e.isIntersecting&&n.ListenerQueue.forEach(function(t){if(t.el===e.target){if(t.state.loaded)return n._observer.unobserve(t.el);t.load()}})})}},{key:"_elRenderer",value:function(t,e,n){if(t.el){var r=t.el,i=t.bindType,a=void 0;switch(e){case"loading":a=t.loading;break;case"error":a=t.error;break;default:a=t.src}if(i?r.style[i]='url("'+a+'")':r.getAttribute("src")!==a&&r.setAttribute("src",a),r.setAttribute("lazy",e),this.$emit(e,t,n),this.options.adapter[e]&&this.options.adapter[e](t,this.options),this.options.dispatchEvent){var o=new y(e,{detail:t});r.dispatchEvent(o)}}}},{key:"_valueFormatter",value:function(t){var e=t,n=this.options.loading,r=this.options.error;return function(t){return null!==t&&"object"===(void 0===t?"undefined":u(t))}(t)&&(t.src||this.options.silent,e=t.src,n=t.loading||this.options.loading,r=t.error||this.options.error),{src:e,loading:n,error:r}}}]),g}()},P=function(){function n(t){var e=t.lazy;b(this,n),((this.lazy=e).lazyContainerMananger=this)._queue=[]}return t(n,[{key:"bind",value:function(t,e,n){var r=new O({el:t,binding:e,vnode:n,lazy:this.lazy});this._queue.push(r)}},{key:"update",value:function(e,t,n){var r=l(this._queue,function(t){return t.el===e});r&&r.update({el:e,binding:t,vnode:n})}},{key:"unbind",value:function(e,t,n){var r=l(this._queue,function(t){return t.el===e});r&&(r.clear(),a(this._queue,r))}}]),n}(),T={selector:"img"},O=function(){function a(t){var e=t.el,n=t.binding,r=t.vnode,i=t.lazy;b(this,a),this.el=null,this.vnode=r,this.binding=n,this.options={},this.lazy=i,this._queue=[],this.update({el:e,binding:n})}return t(a,[{key:"update",value:function(t){var e=this,n=t.el,r=t.binding;this.el=n,this.options=v({},T,r.value),this.getImgs().forEach(function(t){e.lazy.add(t,v({},e.binding,{value:{src:"dataset"in t?t.dataset.src:t.getAttribute("data-src"),error:"dataset"in t?t.dataset.error:t.getAttribute("data-error"),loading:"dataset"in t?t.dataset.loading:t.getAttribute("data-loading")}}),e.vnode)})}},{key:"getImgs",value:function(){return function(t){for(var e=t.length,n=[],r=0;r<e;r++)n.push(t[r]);return n}(this.el.querySelectorAll(this.options.selector))}},{key:"clear",value:function(){var e=this;this.getImgs().forEach(function(t){return e.lazy.remove(t)}),this.vnode=null,this.binding=null,this.lazy=null}}]),a}();return{install:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=A(t),r=new n(e),i=new P({lazy:r}),a="2"===t.version.split(".")[0];t.prototype.$Lazyload=r,e.lazyComponent&&t.component("lazy-component",function(t){return{props:{tag:{type:String,default:"div"}},render:function(t){return!1===this.show?t(this.tag):t(this.tag,null,this.$slots.default)},data:function(){return{el:null,state:{loaded:!1},rect:{},show:!1}},mounted:function(){this.el=this.$el,t.addLazyBox(this),t.lazyLoadHandler()},beforeDestroy:function(){t.removeComponent(this)},methods:{getRect:function(){this.rect=this.$el.getBoundingClientRect()},checkInView:function(){return this.getRect(),m&&this.rect.top<window.innerHeight*t.options.preLoad&&this.rect.bottom>0&&this.rect.left<window.innerWidth*t.options.preLoad&&this.rect.right>0},load:function(){this.show=!0,this.state.loaded=!0,this.$emit("show",this)}}}}(r)),e.lazyImage&&t.component("lazy-image",function(i){return{props:{src:[String,Object],tag:{type:String,default:"img"}},render:function(t){return t(this.tag,{attrs:{src:this.renderSrc}},this.$slots.default)},data:function(){return{el:null,options:{src:"",error:"",loading:"",attempt:i.options.attempt},state:{loaded:!1,error:!1,attempt:0},rect:{},renderSrc:""}},watch:{src:function(){this.init(),i.addLazyBox(this),i.lazyLoadHandler()}},created:function(){this.init(),this.renderSrc=this.options.loading},mounted:function(){this.el=this.$el,i.addLazyBox(this),i.lazyLoadHandler()},beforeDestroy:function(){i.removeComponent(this)},methods:{init:function(){var t=i._valueFormatter(this.src),e=t.src,n=t.loading,r=t.error;this.state.loaded=!1,this.options.src=e,this.options.error=r,this.options.loading=n,this.renderSrc=this.options.loading},getRect:function(){this.rect=this.$el.getBoundingClientRect()},checkInView:function(){return this.getRect(),m&&this.rect.top<window.innerHeight*i.options.preLoad&&this.rect.bottom>0&&this.rect.left<window.innerWidth*i.options.preLoad&&this.rect.right>0},load:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;if(this.state.attempt>this.options.attempt-1&&this.state.error)return i.options.silent||console.log("VueLazyload log: "+this.options.src+" tried too more than "+this.options.attempt+" times"),void t();var e=this.options.src;x({src:e},function(t){var e=t.src;n.renderSrc=e,n.state.loaded=!0},function(t){n.state.attempt++,n.renderSrc=n.options.error,n.state.error=!0})}}}}(r)),a?(t.directive("lazy",{bind:r.add.bind(r),update:r.update.bind(r),componentUpdated:r.lazyLoadHandler.bind(r),unbind:r.remove.bind(r)}),t.directive("lazy-container",{bind:i.bind.bind(i),update:i.update.bind(i),unbind:i.unbind.bind(i)})):(t.directive("lazy",{bind:r.lazyLoadHandler.bind(r),update:function(t,e){v(this.vm.$refs,this.vm.$els),r.add(this.el,{modifiers:this.modifiers||{},arg:this.arg,value:t,oldValue:e},{context:this.vm})},unbind:function(){r.remove(this.el)}}),t.directive("lazy-container",{update:function(t,e){i.update(this.el,{modifiers:this.modifiers||{},arg:this.arg,value:t,oldValue:e},{context:this.vm})},unbind:function(){i.unbind(this.el)}}))}}}()},49:function(t,e,n){t.exports=n.p+"img/wanfashuoming@3x.png"},81:function(t,e,n){}});