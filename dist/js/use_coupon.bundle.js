!function(i){var n={};function s(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=i,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=250)}({0:function(t,e){t.exports=Vue},1:function(t,e,i){"use strict";function n(t,e,i,n,s,o,a,r){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=c):s&&(c=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:u}}i.d(e,"a",function(){return n})},10:function(t,e,i){"use strict";var a=i(8),n=i(2),s=Object(n.f)("swipe-item"),o=s[0],r=s[1];e.a=o({data:function(){return{offset:0}},beforeCreate:function(){this.$parent.swipes.push(this)},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)},render:function(t){var e=this.$parent,i=e.vertical,n=e.computedWidth,s=e.computedHeight,o={width:n+"px",height:i?s+"px":"100%",transform:"translate"+(i?"Y":"X")+"("+this.offset+"px)"};return t("div",{class:r(),style:o,on:Object(a.a)({},this.$listeners)},[this.slots()])}})},13:function(t,e,i){"use strict";i(5),i(14)},14:function(t,e,i){},15:function(t,e,i){"use strict";i(5),i(16)},16:function(t,e,i){},17:function(t,e,i){var n=i(37),s=i(38),o=i(39);t.exports=function(t){return n(t)||s(t)||o()}},2:function(t,e,i){"use strict";var n=i(0),s=i.n(n),o="--";function a(t,e,i){return e?t+i+e:t}function r(i){return function(t,e){return t&&"string"!=typeof t&&(e=t,t=""),t=a(i,t,"__"),e?[t,function e(i,n){if("string"==typeof n)return a(i,n,o);if(Array.isArray(n))return n.map(function(t){return e(i,t)});var s={};return n&&Object.keys(n).forEach(function(t){s[i+o+t]=n[t]}),s}(t,e)]:t}}Object.prototype.hasOwnProperty;var c=s.a.prototype,u=s.a.util.defineReactive;u(c,"$vantLang","zh-CN"),u(c,"$vantMessages",{"zh-CN":{name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",complete:"完成",loading:"加载中...",telEmpty:"请填写电话",nameEmpty:"请填写姓名",confirmDelete:"确定要删除么",telInvalid:"请填写正确的电话",vanContactCard:{addText:"添加联系人"},vanContactList:{addText:"新建联系人"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计："},vanCoupon:{valid:"有效期",unlimited:"无使用门槛",discount:function(t){return t+"折"},condition:function(t){return"满"+t+"元可用"}},vanCouponCell:{title:"优惠券",tips:"使用优惠",count:function(t){return t+"张可用"}},vanCouponList:{empty:"暂无优惠券",exchange:"兑换",close:"不使用优惠",enable:"可使用优惠券",disabled:"不可使用优惠券",placeholder:"请输入优惠码"},vanAddressEdit:{area:"地区",postal:"邮政编码",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",postalEmpty:"邮政编码格式不正确",defaultAddress:"设为默认收货地址",telPlaceholder:"收货人手机号",namePlaceholder:"收货人姓名",areaPlaceholder:"选择省 / 市 / 区"},vanAddressEditDetail:{label:"详细地址",placeholder:"街道门牌、楼层房间号等信息"},vanAddressList:{add:"新增地址"}}});var l=function(){return c.$vantMessages[c.$vantLang]},h={methods:{slots:function(t,e){void 0===t&&(t="default");var i=this.$slots,n=this.$scopedSlots;return n[t]?n[t](e):i[t]}}},f={type:Array,default:function(){return[]}},d={type:Number,default:0};function p(t){var e=this.name;t.component(e,this),t.component(C("-"+e),this)}function v(i){return{functional:!0,props:i.props,model:i.model,render:function(t,e){return i(t,e.props,function(t){var e=t.scopedSlots||t.data.scopedSlots||{},i=t.slots();return Object.keys(i).forEach(function(t){e[t]||(e[t]=function(){return i[t]})}),e}(e),e)}}}function m(e){return function(t){return"function"==typeof t&&(t=v(t)),t.functional||(t.mixins=t.mixins||[],t.mixins.push(h)),t.props&&function(e){Object.keys(e).forEach(function(t){e[t]===Array?e[t]=f:e[t]===Number&&(e[t]=d)})}(t.props),t.name=e,t.install=p,t}}function g(t){return[m(t="van-"+t),r(t),function(t){var o=C(t)+".";return function(t){for(var e=w(l(),o+t)||w(l(),t),i=arguments.length,n=new Array(1<i?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return"function"==typeof e?e.apply(void 0,n):e}}(t)]}i.d(e,"e",function(){return b}),i.d(e,"c",function(){return y}),i.d(e,"d",function(){return _}),i.d(e,"b",function(){return w}),i.d(e,"a",function(){return C}),i.d(e,"f",function(){return g});var b=s.a.prototype.$isServer;function y(t){return null!=t}function _(t){var e=typeof t;return null!==t&&("object"==e||"function"==e)}function w(t,e){var i=e.split("."),n=t;return i.forEach(function(t){n=y(n[t])?n[t]:""}),n}var S=/-(\w)/g;function C(t){return t.replace(S,function(t,e){return e.toUpperCase()})}},228:function(t,e,i){"use strict";var n=i(97);i.n(n).a},25:function(t,e,i){t.exports=i.p+"img/couponNoData1.png"},250:function(t,e,s){"use strict";s.r(e);s(13);function i(){var i=this,t=i.$createElement,n=i._self._c||t;return n("section",[n("header",{staticClass:"headtap",attrs:{id:"head"}},[n("img",{attrs:{src:s(40),alt:""},on:{click:i.goback}}),i._v(" "),n("span",{staticClass:"tit"},[i._v("使用优惠券")]),i._v(" "),n("div",{staticClass:"btn",on:{click:function(t){return i.notsub()}}},[i._v("不使用")])]),i._v(" "),n("div",{ref:"tab",staticClass:"tab"},[n("div",{staticClass:"con"},[n("div",{staticClass:"tab-item",on:{click:function(t){return i.changeContent(0,1)}}},[i._v("\n        可用优惠券("+i._s(i.useableMsg?i.useableMsg.length:0)+")\n      ")]),i._v(" "),n("div",{staticClass:"tab-item",on:{click:function(t){return i.changeContent(1,1)}}},[i._v("\n        不可用优惠券("+i._s(i.unuseableMsg?i.unuseableMsg.length:0)+")\n      ")]),i._v(" "),n("div",{ref:"line",staticClass:"line",staticStyle:{left:"0"}})])]),i._v(" "),n("van-swipe",{ref:"swipe",attrs:{id:"sw",autoplay:0,loop:!1,"show-indicators":!1},on:{change:i.changeContent}},[n("van-swipe-item",{staticClass:"content",attrs:{id:"canuse"}},[i.useableMsg&&!!i.useableMsg.length?n("div",i._l(i.useableMsg,function(t,e){return n("div",{key:e,staticClass:"content-item",on:{click:function(t){return i.selectItem(e)}}},[n("div",{staticClass:"left"},[n("p",[i._v(i._s(t.facevalue))]),n("p",[i._v("元")])]),i._v(" "),n("div",{staticClass:"right"},[n("p",[i._v("满"+i._s(t.uselimit)+"可用")]),i._v(" "),n("p",[i._v("有效期至："+i._s(i.getTime(t.endtime)))]),i._v(" "),n("p",[i._v("除标注不可用产品外全场通用")])]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!i.itemSelect[e],expression:"!itemSelect[index] ? true:false"}],staticClass:"icon iconfont",staticStyle:{"background-color":"#fff"}}),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!!i.itemSelect[e],expression:"itemSelect[index] ? true:false"}],staticClass:"icon iconfont icon-selectfill",staticStyle:{"background-color":"#fff"}})])}),0):n("div",{staticClass:"nodatta"},[n("img",{attrs:{src:s(25),alt:""}}),i._v(" "),n("p",[i._v("很遗憾")]),i._v(" "),n("p",[i._v("您暂无可以使用的优惠券")])])]),i._v(" "),n("van-swipe-item",{staticClass:"content",attrs:{id:"uncanuse"}},[i.unuseableMsg&&!!i.unuseableMsg.length?n("div",i._l(i.unuseableMsg,function(t,e){return n("div",{key:e,staticClass:"content-item"},[n("div",{staticClass:"left"},[n("p",[i._v(i._s(t.facevalue))]),n("p",[i._v("元")])]),i._v(" "),n("div",{staticClass:"right"},[n("p",[i._v("满"+i._s(t.uselimit)+"可用")]),i._v(" "),n("p",[i._v("有效期至："+i._s(i.getTime(t.endtime)))]),i._v(" "),n("p",[i._v("除标注不可用产品外全场通用")])]),i._v(" "),n("div",{staticClass:"icon iconfont"})])}),0):n("div",{staticClass:"nodatta"},[n("img",{attrs:{src:s(25),alt:""}}),i._v(" "),n("p",[i._v("很遗憾")]),i._v(" "),n("p",[i._v("您暂无可以使用的优惠券")])])])],1),i._v(" "),n("div",{staticClass:"confirm",on:{click:i.sub}},[i._v("确认")])],1)}var n=s(9),o=(s(15),s(10)),a=s(0),r=s.n(a);i._withStripped=!0;var c=s(17),u=s.n(c),l={data:function(){return{uid:"",comfirmMsg:"",useableMsg:[],unuseableMsg:[],noMsg:!1,useTimeOver:[],unuseTimeOver:[],allSelect:0,itemSelect:[],loadTimer:null}},created:function(){this.uid=window.api?api.getPrefs({sync:!0,key:"SessionUserID"}):$api.getStorage("SessionUserID"),this.comfirmMsg=pageParam("sksk")},mounted:function(){var t=getname("statustop")||0;$api.byId("head").style.paddingTop=t+"px",this.bindHeight(),this.getMsg()},methods:{bindHeight:function(){var t=document.documentElement.clientHeight||document.body.clientHeight,e=this.$refs.tab,i=getname("statustop")||0;$api.byId("uncanuse").style.height=t-e.offsetTop-e.offsetHeight-i+"px",$api.byId("canuse").style.height=t-e.offsetTop-e.offsetHeight-i+"px",$api.byId("sw").style.height=t-e.offsetTop-e.offsetHeight-i+"px"},getMsg:function(){this.loadTimer=setTimeout(function(){showLoading()},1e3);var e=this;openapp?api.ajax({url:siteUrl+"/Marketing/Coupon/GetUseableCouponListJson?uid="+e.uid,method:"post",data:{body:{uid:e.uid,queryinput:e.comfirmMsg,isgb:"groupbuynow"==pageParam("way")||""}},headers:{Authorization:window.api?api.getPrefs({sync:!0,key:"SessionKey"}):$api.getStorage("SessionKey"),"Content-Type":"application/json; charset=utf-8"}},function(t){e.sucback(t)}):axios({method:"POST",url:siteUrl+"/Marketing/Coupon/GetUseableCouponListJson?uid="+e.uid,data:{uid:e.uid,queryinput:e.comfirmMsg,isgb:"groupbuynow"==pageParam("way")||""},headers:{Authorization:window.api?api.getPrefs({sync:!0,key:"SessionKey"}):$api.getStorage("SessionKey"),"Content-Type":"application/json; charset=utf-8"}}).then(function(t){e.sucback(t.data)})},sucback:function(t){null!=this.loadTimer&&(hideLoading(),clearTimeout(this.loadTimer),this.loadTimer=null);var e=this,i=t,n=e.useableMsg,s=e.unuseableMsg,o=e.noMsg,a=e.itemSelect,r=e.allSelect;i&&i.success&&1==i.status?(0<i.Data.useable.length&&(n=[].concat(u()(n),u()(i.Data.useable))),0<i.Data.unuseable.length&&(s=[].concat(u()(s),u()(i.Data.unuseable)))):promptMsg(i.err),n.length<1&&s.length<1&&(o=!0),n.forEach(function(t,e){a.push(0),r=0}),e.useableMsg=n,e.unuseableMsg=s,e.noMsg=o,e.itemSelect=a,e.allSelect=r},changeContent:function(t,e){e&&this.$refs.swipe.swipeTo(t),0==t?this.$refs.line.style.left=0:1==t&&(this.$refs.line.style.left="50%")},getTime:function(t){return t.split(" ")[0].replace(/\./g,"-")},selectItem:function(t){var e=t;if("a"===e)this.itemSelect.fill(0),this.allSelect=1;else for(var i in this.allSelect=0,this.itemSelect)this.useableMsg[e].isplatform?Number(i)===Number(e)?this.itemSelect[i]=this.itemSelect[i]?0:1:this.useableMsg[i].isplatform&&(this.itemSelect[i]=0):Number(i)===Number(e)?this.itemSelect[i]=this.itemSelect[i]?0:1:this.useableMsg[i].isplatform||(this.itemSelect[i]=0);this.$forceUpdate()},goback:function(){closeWin()},sub:function(){var i=this,n=[],s="";this.itemSelect.forEach(function(t,e){1==t&&(n.push(i.useableMsg[e].usercouponid),s=Number(s)+Number(i.useableMsg[e].facevalue))}),api.execScript({name:"ordercomfirm",script:"shuju('"+n+"','"+s+"');"}),setTimeout(function(){api.closeWin()},500)},notsub:function(){api.execScript({name:"ordercomfirm",script:"shuju('','');"}),setTimeout(function(){api.closeWin()},500)}}},h=(s(228),s(1)),f=Object(h.a)(l,i,[],!1,null,null,null);f.options.__file="src/page/use_coupon/use_coupon.vue";var d=f.exports;r.a.use(n.a).use(o.a),openapp&&(window.apiready=function(){var t=$api.getStorage("statustop");document.getElementById("head").style.paddingTop=t+"px"});openapp?window.apiready=function(){new r.a({render:function(t){return t(d)}}).$mount("#app")}:new r.a({render:function(t){return t(d)}}).$mount("#app")},3:function(t,e,i){"use strict";i.d(e,"b",function(){return a}),i.d(e,"a",function(){return r}),i.d(e,"c",function(){return c});var s=i(2),o=!1;if(!s.e)try{var n={};Object.defineProperty(n,"passive",{get:function(){o=!0}}),window.addEventListener("test-passive",null,n)}catch(t){}function a(t,e,i,n){void 0===n&&(n=!1),s.e||t.addEventListener(e,i,!!o&&{capture:!1,passive:n})}function r(t,e,i){s.e||t.removeEventListener(e,i)}function c(t,e){"boolean"==typeof t.cancelable&&!t.cancelable||t.preventDefault(),e&&function(t){t.stopPropagation()}(t)}},37:function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},38:function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},39:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},40:function(t,e,i){t.exports=i.p+"img/icon-back.png"},5:function(t,e,i){},6:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={data:function(){return{direction:""}},methods:{touchStart:function(t){this.resetTouchStatus(),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY},touchMove:function(t){var e=t.touches[0];this.deltaX=e.clientX-this.startX,this.deltaY=e.clientY-this.startY,this.offsetX=Math.abs(this.deltaX),this.offsetY=Math.abs(this.deltaY),this.direction=this.direction||function(t,e){return e<t&&10<t?"horizontal":t<e&&10<e?"vertical":""}(this.offsetX,this.offsetY)},resetTouchStatus:function(){this.direction="",this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0}}}},8:function(t,e,i){"use strict";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}i.d(e,"a",function(){return n})},9:function(t,e,i){"use strict";var n=i(2),s=i(3),o=i(6),a=Object(n.f)("swipe"),r=a[0],c=a[1];e.a=r({mixins:[o.a],props:{width:Number,height:Number,autoplay:Number,vertical:Boolean,initialSwipe:Number,indicatorColor:String,loop:{type:Boolean,default:!0},touchable:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!0},duration:{type:Number,default:500}},data:function(){return{computedWidth:0,computedHeight:0,offset:0,active:0,deltaX:0,deltaY:0,swipes:[],swiping:!1}},mounted:function(){this.initialize(),this.$isServer||Object(s.b)(window,"resize",this.onResize,!0)},activated:function(){this.rendered&&this.initialize(),this.rendered=!0},destroyed:function(){this.clear(),this.$isServer||Object(s.a)(window,"resize",this.onResize,!0)},watch:{swipes:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t?this.autoPlay():this.clear()}},computed:{count:function(){return this.swipes.length},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t,e=this.vertical?"height":"width",i=this.vertical?"width":"height";return(t={})[e]=this.trackSize+"px",t[i]=this[i]?this[i]+"px":"",t.transitionDuration=(this.swiping?0:this.duration)+"ms",t.transform="translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)",t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}}},methods:{initialize:function(t){if(void 0===t&&(t=this.initialSwipe),clearTimeout(this.timer),this.$el){var e=this.$el.getBoundingClientRect();this.computedWidth=this.width||e.width,this.computedHeight=this.height||e.height}this.swiping=!0,this.active=t,this.offset=1<this.count?-this.size*this.active:0,this.swipes.forEach(function(t){t.offset=0}),this.autoPlay()},onResize:function(){this.initialize(this.activeIndicator)},onTouchStart:function(t){this.touchable&&(this.clear(),this.swiping=!0,this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&(Object(s.c)(t,!0),this.move({offset:Math.min(Math.max(this.delta,-this.size),this.size)})))},onTouchEnd:function(){if(this.touchable&&this.swiping){if(this.delta&&this.isCorrectDirection){var t=this.vertical?this.offsetY:this.offsetX;this.move({pace:0<t?0<this.delta?-1:1:0,emitChange:!0})}this.swiping=!1,this.autoPlay()}},move:function(t){var e=t.pace,i=void 0===e?0:e,n=t.offset,s=void 0===n?0:n,o=t.emitChange,a=this.delta,r=this.active,c=this.count,u=this.swipes,l=this.trackSize,h=0===r,f=r===c-1;!this.loop&&(h&&(0<s||i<0)||f&&(s<0||0<i))||c<=1||(u[0]&&(u[0].offset=f&&(a<0||0<i)?l:0),u[c-1]&&(u[c-1].offset=h&&(0<a||i<0)?-l:0),i&&-1<=r+i&&r+i<=c&&(this.active+=i,o&&this.$emit("change",this.activeIndicator)),this.offset=Math.round(s-this.active*this.size))},swipeTo:function(t){var e=this;this.swiping=!0,this.resetTouchStatus(),this.correctPosition(),setTimeout(function(){e.swiping=!1,e.move({pace:t%e.count-e.active,emitChange:!0})},30)},correctPosition:function(){this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,e=this.autoplay;e&&1<this.count&&(this.clear(),this.timer=setTimeout(function(){t.swiping=!0,t.resetTouchStatus(),t.correctPosition(),setTimeout(function(){t.swiping=!1,t.move({pace:1,emitChange:!0}),t.autoPlay()},30)},e))}},render:function(i){var n=this,t=this.count,s=this.activeIndicator,e=this.slots("indicator")||this.showIndicators&&1<t&&i("div",{class:c("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(t)).map(function(t,e){return i("i",{class:c("indicator",{active:e===s}),style:e===s?n.indicatorStyle:null})})]);return i("div",{class:c()},[i("div",{ref:"track",style:this.trackStyle,class:c("track"),on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[this.slots()]),e])}})},97:function(t,e,i){}});